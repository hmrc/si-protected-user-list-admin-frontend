@*
 * Copyright 2023 HM Revenue & Customs
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *@

@import uk.gov.hmrc.govukfrontend.views.html.components._
@import uk.gov.hmrc.govukfrontend.views.html.components.implicits._
@import uk.gov.hmrc.hmrcfrontend.views.Implicits._

@this(
        mainLayout: Layout,
        formTemplate: FormWithCSRF,
        govukInput: GovukInput,
        errorSummary: GovukErrorSummary
)

@(form: Form[_], successFailureMessage: String*)(implicit request: Request[_], messages: Messages)

@mainLayout(pageTitle = Messages("home.page.title")) {
    <h1 class="govuk-heading-l">@Messages("search.header")</h1>

    @formTemplate(action = controllers.routes.SiProtectedUserController.handleSearchRequest(), args =  Symbol("autocomplete")  -> "off", Symbol("novalidate")  -> "") {

        @if(form.hasErrors) {
            <div class="govuk-error-summary" id="Search-failure" role="alert" aria-labelledby="error-summary-title" tabindex="-1" data-module="govuk-error-summary">
                <h2 id="error-summary-title" class="govuk-error-summary__title">@Messages("otpafe.site.error.page.header")</h2>

                <div class="govuk-error-summary__body">
                    <ul>
                    @form.errors.map(error =>
                        fragments.errorSummaryItem(error.key, "form.username.search", Seq("server-rendered"))
                    )
                    </ul>
                </div>
            </div>
        }

        @if(successFailureMessage.nonEmpty) {
            <h2 id="errorSummaryHeading" class="h3-heading govuk-heading-s">@successFailureMessage</h2>
        }

        <fieldset class="govuk-fieldset govuk-fieldset">
            <div class="form-field-group @if(form.hasErrors) {form-field-group--error}">

                @govukInput(Input(
                    name = "name",
                    label = Label(content = Text(Messages("search.scp")))
                ).withFormField(form("name")))

                <div class="form-field govuk-form-group">
                    <br/>
                    <button class="govuk-button" type="submit">@Messages("search.search")</button>
                    <button class="govuk-button" type="button" onclick="location.href = '@routes.SiProtectedUserController.homepage'">@Messages("delete.complete.button")</button>
                </div>
            </div>
        </fieldset>
    }
}
